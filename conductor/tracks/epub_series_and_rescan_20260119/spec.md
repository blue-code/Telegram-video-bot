# EPUB 시리즈 그룹화 및 라이브러리 개선

#### 1. 개요 (Overview)
- **목적**: 대량의 EPUB 전자책을 관리하기 쉽도록 만화책과 동일한 시리즈 그룹화 로직을 도입하고, 기존 데이터를 정리할 수 있는 재스캔 기능을 제공합니다.
- **주요 변경 사항**:
    - EPUB 파일명 패턴 분석을 통한 시리즈 자동 식별.
    - eBook 메뉴의 기본 뷰를 시리즈 및 단권 혼합 뷰로 변경.
    - 관리자용 EPUB 시리즈 재스캔 기능 추가.

#### 2. 기능 요구사항 (Functional Requirements)
- **EPUB 시리즈 식별 로직**:
    - 만화책 시리즈 식별에 사용되는 정규식 패턴(`제목 N권`, `제목 - 01` 등)을 EPUB 파일에도 적용.
    - 추출된 시리즈명이 동일한 파일들을 하나의 그룹으로 묶음.
- **UI/UX 개선 (eBook 라이브러리)**:
    - **메인 뷰**: 시리즈 카드(첫 권 표지 사용, 권수 배지 표시)와 단권 책이 함께 표시됨.
    - **시리즈 상세 페이지**: 특정 시리즈 클릭 시 포함된 모든 권수 목록을 보여주는 전용 페이지(`comic_series.html`과 유사한 구조) 추가.
    - **재스캔 버튼**: eBook 페이지 상단에 '🔄 시리즈 재정리' 버튼 추가.
- **데이터 관리**:
    - **재스캔 API**: DB의 `files` 테이블에서 `.epub` 파일을 스캔하여 시리즈 정보를 업데이트하는 엔드포인트 구현.
    - **마이그레이션**: 기존에 단권으로 등록된 EPUB들도 재스캔을 통해 시리즈로 재분류 가능하게 함.

#### 3. 비기능 요구사항 (Non-Functional Requirements)
- **일관성**: 만화책 시리즈 뷰와 유사한 사용자 경험을 제공하여 학습 비용 최소화.
- **안정성**: 재스캔 시 기존의 읽기 진행 상황(CFI)이 유지되도록 함.

#### 4. 수락 기준 (Acceptance Criteria)
- [ ] `[작가] 제목 1권.epub`, `[작가] 제목 2권.epub` 업로드 시 하나의 시리즈 카드로 묶이는가?
- [ ] 시리즈 카드 클릭 시 상세 목록 페이지로 이동하는가?
- [ ] 재스캔 버튼 클릭 후 기존 파일들이 시리즈로 올바르게 재분류되는가?
- [ ] 단권 책(시리즈가 없는 책)도 목록에 정상적으로 표시되는가?
